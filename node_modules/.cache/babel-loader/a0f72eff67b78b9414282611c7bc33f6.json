{"ast":null,"code":"var _jsxFileName = \"D:\\\\www\\\\Animal\\\\src\\\\component\\\\Page\\\\NavbarComponent.jsx\";\nimport React from 'react';\nimport CheckLoginComponent from '../CheckLogin/CheckLoginComponent';\nimport { LoginStatus } from '../../api/CheckLoginApis';\nimport { connect } from 'react-redux';\nimport { Menu, Layout } from 'antd';\nimport { Link, withRouter } from 'react-router-dom';\nimport { withCookies } from 'react-cookie';\nimport { Redirect } from 'react-router-dom';\nconst {\n  Header\n} = Layout;\nconst {\n  SubMenu\n} = Menu;\n\nconst mapStateToProps = state => {\n  return {\n    propsData: state\n  };\n};\n\nclass NavbarComponent extends React.Component {\n  constructor() {\n    super();\n\n    this.MenuRouter = e => {\n      let part = e.key;\n      this.setState({\n        key: part\n      });\n      const {\n        cookies\n      } = this.props;\n      const token = cookies.cookies.token_cookie;\n\n      const checkFuntion = async () => {\n        if (token === undefined) {\n          this.setState({\n            redirect: true\n          });\n        } else {\n          let loginStatus = await LoginStatus({\n            token\n          }),\n              tokenStat = loginStatus.user[0].expri_stat;\n\n          if (tokenStat === true) {\n            cookies.remove('token_cookie', {\n              path: '/'\n            });\n            cookies.remove('userName', {\n              path: '/'\n            });\n          } else {\n            this.props.dispatch({\n              'type': 'userLogin',\n              'data': loginStatus.user[0]\n            });\n          }\n        }\n      };\n\n      if (window.location.pathname !== '/regit') {\n        checkFuntion();\n      }\n    };\n\n    this.state = {\n      key: '',\n      redirect: false\n    };\n  }\n\n  componentDidMount() {\n    const {\n      cookies\n    } = this.props;\n    const token = cookies.cookies.token_cookie;\n\n    const checkFuntion = async () => {\n      if (token === undefined) {\n        this.setState({\n          redirect: true\n        });\n      } else {\n        let loginStatus = await LoginStatus({\n          token\n        }),\n            tokenStat = loginStatus.user[0].expri_stat;\n\n        if (tokenStat === true) {\n          cookies.remove('token_cookie', {\n            path: '/'\n          });\n          cookies.remove('userName', {\n            path: '/'\n          });\n        } else {\n          this.props.dispatch({\n            'type': 'userLogin',\n            'data': loginStatus.user[0]\n          });\n        }\n      }\n    };\n\n    if (window.location.pathname !== '/regit') {\n      checkFuntion();\n    }\n  }\n\n  render() {\n    const redirect = this.state.redirect;\n\n    if (redirect) {\n      this.setState({\n        redirect: false\n      });\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }\n      });\n    }\n\n    const user = this.props.propsData.user;\n    let menuLogin = user == undefined ? /*#__PURE__*/React.createElement(Link, {\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    }, \"เข้าสู่ระบบ\") : /*#__PURE__*/React.createElement(Link, {\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    }, user.employee_prefix_description + ' ' + user.employee_fname + ' ' + user.employee_lname);\n    return /*#__PURE__*/React.createElement(Header, {\n      style: {\n        backgroundColor: '#fff'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        float: 'right'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Menu, {\n      onClick: this.MenuRouter,\n      mode: \"horizontal\",\n      theme: \"light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Menu.Item, {\n      key: \"/main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 25\n      }\n    }, \"หน้าหลัก\")), /*#__PURE__*/React.createElement(SubMenu, {\n      title: \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Menu.ItemGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Menu.Item, {\n      key: \"/animal_regit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/animal_regit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 33\n      }\n    }, 'ลงทะเบียนสัตว์ป่า')), /*#__PURE__*/React.createElement(Menu.Item, {\n      key: \"/animal_survey\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/animal_survey\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 33\n      }\n    }, 'บันทึกการพบเจอสัตว์ป่า')))), /*#__PURE__*/React.createElement(Menu.Item, {\n      key: \"/login\",\n      style: {\n        float: 'right'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }\n    }, menuLogin)));\n  }\n\n}\n\nexport default withRouter(withCookies(connect(mapStateToProps)(NavbarComponent)));","map":{"version":3,"sources":["D:/www/Animal/src/component/Page/NavbarComponent.jsx"],"names":["React","CheckLoginComponent","LoginStatus","connect","Menu","Layout","Link","withRouter","withCookies","Redirect","Header","SubMenu","mapStateToProps","state","propsData","NavbarComponent","Component","constructor","MenuRouter","e","part","key","setState","cookies","props","token","token_cookie","checkFuntion","undefined","redirect","loginStatus","tokenStat","user","expri_stat","remove","path","dispatch","window","location","pathname","componentDidMount","render","menuLogin","employee_prefix_description","employee_fname","employee_lname","backgroundColor","float"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport CheckLoginComponent from '../CheckLogin/CheckLoginComponent'\r\nimport { LoginStatus } from '../../api/CheckLoginApis'\r\nimport { connect } from 'react-redux'\r\nimport { Menu, Layout } from 'antd'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport { withCookies } from 'react-cookie'\r\nimport { Redirect } from 'react-router-dom'\r\n\r\nconst { Header } = Layout\r\nconst { SubMenu } = Menu\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        propsData: state\r\n    }\r\n}\r\nclass NavbarComponent extends React.Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            key: '',\r\n            redirect: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { cookies } = this.props\r\n        const token = cookies.cookies.token_cookie\r\n\r\n        const checkFuntion = async () => {\r\n            if (token === undefined) {\r\n                this.setState({\r\n                    redirect: true\r\n                })\r\n            } else {\r\n                let loginStatus = await LoginStatus({ token }),\r\n                    tokenStat = loginStatus.user[0].expri_stat\r\n                if (tokenStat === true) {\r\n                    cookies.remove('token_cookie', { path: '/' })\r\n                    cookies.remove('userName', { path: '/' })\r\n\r\n                } else {\r\n                    this.props.dispatch({\r\n                        'type': 'userLogin',\r\n                        'data': loginStatus.user[0]\r\n                    })\r\n\r\n                }\r\n            }\r\n        }\r\n        if (window.location.pathname !== '/regit') {\r\n            checkFuntion()\r\n        }\r\n    }\r\n\r\n    MenuRouter = (e) => {\r\n        let part = e.key\r\n        this.setState({\r\n            key: part\r\n        })\r\n\r\n        const { cookies } = this.props\r\n        const token = cookies.cookies.token_cookie\r\n\r\n        const checkFuntion = async () => {\r\n            if (token === undefined) {\r\n                this.setState({\r\n                    redirect: true\r\n                })\r\n            } else {\r\n                let loginStatus = await LoginStatus({ token }),\r\n                    tokenStat = loginStatus.user[0].expri_stat\r\n                if (tokenStat === true) {\r\n                    cookies.remove('token_cookie', { path: '/' })\r\n                    cookies.remove('userName', { path: '/' })\r\n\r\n                } else {\r\n                    this.props.dispatch({\r\n                        'type': 'userLogin',\r\n                        'data': loginStatus.user[0]\r\n                    })\r\n\r\n                }\r\n            }\r\n        }\r\n        if (window.location.pathname !== '/regit') {\r\n            checkFuntion()\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const redirect = this.state.redirect\r\n        if (redirect) {\r\n            this.setState({\r\n                redirect: false\r\n            })\r\n            return (<Redirect to='/login' />)\r\n        }\r\n        const user = this.props.propsData.user\r\n        let menuLogin = (user == undefined) ?\r\n            <Link to=\"/login\">\r\n                {\"เข้าสู่ระบบ\"}\r\n            </Link>\r\n            :\r\n            <Link to=\"/login\">\r\n                {user.employee_prefix_description + ' ' + user.employee_fname + ' ' + user.employee_lname}\r\n            </Link>\r\n\r\n        return (\r\n            <Header style={{ backgroundColor: '#fff' }}>\r\n                <div style={{\r\n                    float: 'right'\r\n                }}>\r\n\r\n                </div>\r\n                <Menu onClick={this.MenuRouter} mode=\"horizontal\" theme=\"light\" >\r\n                    <Menu.Item key=\"/main\" >\r\n                        <Link to='/main'>\r\n                            {\"หน้าหลัก\"}\r\n                        </Link>\r\n                    </Menu.Item>\r\n                    <SubMenu title=\"บันทึกข้อมูล\">\r\n                        <Menu.ItemGroup >\r\n                            <Menu.Item key=\"/animal_regit\">\r\n                                <Link to=\"/animal_regit\">{'ลงทะเบียนสัตว์ป่า'}</Link>\r\n                            </Menu.Item>\r\n                            <Menu.Item key=\"/animal_survey\">\r\n                                <Link to=\"/animal_survey\">{'บันทึกการพบเจอสัตว์ป่า'}</Link>\r\n                            </Menu.Item>\r\n                        </Menu.ItemGroup>\r\n                    </SubMenu>\r\n                    <Menu.Item key=\"/login\" style={{ float: 'right' }}>\r\n                        {menuLogin}\r\n                    </Menu.Item>\r\n                </Menu>\r\n\r\n            </Header>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(withCookies(connect(mapStateToProps)(NavbarComponent)))"]},"metadata":{},"sourceType":"module"}